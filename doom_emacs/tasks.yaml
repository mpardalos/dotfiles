---
- name: Install requirements for doom emacs
  become: yes
  package:
    name:
      - emacs
      - fd-find
      - aspell
      - pandoc
      - editorconfig
    state: latest
- name: Link doom emacs configuration
  file:
    state: link
    src: "{{ dotfiles }}/doom_emacs"
    dest: "{{ home }}/.config/doom"
- name: Download doom emacs
  git:
    repo: "https://github.com/doomemacs/doomemacs.git"
    dest: "{{ home }}/.emacs.d/"
    update: no
- name: Install doom emacs
  shell:
    cmd: "{{ home }}/.emacs.d/bin/doom install"
    creates: "{{ home }}/.emacs.d/.local/straight"
