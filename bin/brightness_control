#!/bin/sh

# Script inspired by these wonderful people:
# https://github.com/dastorm/volume-notification-dunst/blob/master/volume.sh
# https://gist.github.com/sebastiencs/5d7227f388d93374cebdf72e783fbd6a

usage() {
    echo "Usage: $(basename $0) (up|down)"
}

send_notification() {
    icon="display-brightness-symbolic.symbolic"
    brightness=$(xbacklight -get | cut -d '.' -f 1)
    bar=$(~/.bin/draw_bar 20 --percentage $brightness)
    notification_id=2501

    dunstify \
        --icon=$icon \
        --replace=$notification_id \
        --urgency=low \
        "$bar"
}

case $1 in
    up) xbacklight -time 0 -inc 5 ;;
    down) xbacklight -time 0 -dec 5 ;;
    *) usage; exit 1 ;;
esac

send_notification
